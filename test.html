<!doctype html>
<title>JS2ME</title>
<script type="text/javascript" src="js/zip/zip.js"></script>
<script type="text/javascript" src="js/zip/zip-ext.js"></script>
<script type="text/javascript">
	window.onload = function () {
		zip.workerScriptsPath = 'js/zip/';
		//var reader = new zip.HttpReader('../Downloads/rubik39scu_9b9p7i2m.jar');
		var reader = new zip.HttpReader('jars/test.jar');
		
		function initClasses(obj) {
			if (obj.prototype && obj.prototype._clinit__V) {
				obj.prototype._clinit__V.apply(obj);
			}
			for (var i in obj) {
				if (i[0] == '$') {
					initClasses(obj[i]);
				}
			}
		}
		
		var start = function () {
			initClasses(javaRoot);
			var mainMidlet = js2me.manifest['midlet-1'];
			var mainClass = js2me.findClass(js2me.JAVA_ROOT + '.$' + mainMidlet.split(',')[2].trim().replace(/\./g, '.$'));
			var midlet = new mainClass();
			midlet._init__V();
			midlet.$startApp__V();
		}
		
		zip.createReader(reader, function(zipReader) {
			//reader.size = 92065;
			reader.size = 1360;
			zipReader.getEntries(function (entries) {
				js2me.loadEntries(entries, start);
			});
		}); 
		//document.getElementById('keypad').style.width = js2me.width + 'px';
		document.getElementById('screen').style.width = js2me.width + 'px';
		document.getElementById('screen').style.height = js2me.height + 'px';
			
		
	};
	var js2me = {
		JAVA_ROOT: 'javaRoot',
		width: 240,
		height: 266
	};
</script>

<style>
	#title {
		border: 1px solid black;
		text-align: center;
		height: 14px;
	}
	#keypad {
		text-align: center;
	}
	.key, .softkey {
		display: inline-block;
		border: 1px solid black;
	}
	.key:hover, .softkey:hover {
		background: #aaf
	}
	#up.key, #down.key {
		width: 80px;
		height: 13px;
		
	}
	#left.key, #right.key, #ok.key {
		width: 38px;
		height: 13px;
		
	}
	#choice.softkey, #back.softkey {
		width: 48px;
		height: 13px;
	}
	.num {
		width: 38px;
		height: 13px;
	}
	#frame {
		display: inline-block;
		border: 1px solid black;
		overflow: hidden;
		width: 320px;
		height: 480px;
		text-align: center;
	}
	#screen {
		border: 1px solid black;
		display: inline-block;
	}
</style>
<div id="frame">
	<div id="title"></div>
	<div id="screen"></div>
	<div id="keypad">
		<a id="up" class="key"></a><br>
		<a id="choice" class="softkey"></a>
		<a id="left" class="key"></a>
		<a id="ok" class="key"></a>
		<a id="right" class="key"></a>
		<a id="back" class="softkey"></a><br>
		<a id="down" class="key"></a><br>
		<a id="num1" class="key num"></a>
		<a id="num2" class="key num"></a>
		<a id="num3" class="key num"></a><br>
		<a id="num4" class="key num"></a>
		<a id="num5" class="key num"></a>
		<a id="num6" class="key num"></a><br>
		<a id="num7" class="key num"></a>
		<a id="num8" class="key num"></a>
		<a id="num9" class="key num"></a><br>
		<a id="star" class="key num"></a>
		<a id="num0" class="key num"></a>
		<a id="pound" class="key num"></a><br>
	</div>
</div>

<script type="text/javascript" src="js/bufferStream.js"></script>
<script type="text/javascript" src="js/convert.js"></script>
<script type="text/javascript" src="js/execute.js"></script>
<script type="text/javascript" src="js/manifest.js"></script>
<script type="text/javascript" src="js/loader.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Displayable.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Canvas.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Command.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Display.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Font.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Form.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Graphics.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/Image.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/lcdui/List.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/midlet/MIDlet.js"></script>
<script type="text/javascript" src="js/me/javax/microedition/rms/RecordStore.js"></script>
<script type="text/javascript" src="js/me/java/io/PrintStream.js"></script>
<script type="text/javascript" src="js/me/java/lang/Integer.js"></script>
<script type="text/javascript" src="js/me/java/lang/String.js"></script>
<script type="text/javascript" src="js/me/java/lang/StringBuffer.js"></script>
<script type="text/javascript" src="js/me/java/lang/System.js"></script>
<script type="text/javascript" src="js/me/java/lang/Thread.js"></script>
<script type="text/javascript" src="js/me/java/util/Random.js"></script>

